{% extends "layout.html" %}

{% block title %}홈 - GFEM{% endblock %}

{% block content %}
{% if current_user.is_authenticated %}

<div class="row">
    <div class="col-12 mb-4">
        <h1 class="h3 mb-0 text-gray-800">안녕하세요, {{ current_user.name }}님!</h1>
        <p class="lead text-muted">GMT 필드 엔지니어 관리 시스템입니다.</p>
    </div>
</div>

<!-- 통계 카드 -->
<div class="row">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-primary shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                            진행 중인 프로젝트</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">3</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-project-diagram fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-success shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                            예정된 작업</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">5</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-calendar fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-info shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-info text-uppercase mb-1">등록된 장비
                        </div>
                        <div class="row no-gutters align-items-center">
                            <div class="col-auto">
                                <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">12</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-tools fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-warning shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                            관리 장소</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">8</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-map-marker-alt fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 콘텐츠 영역 -->
<div class="row">
    <!-- 왼쪽 섹션 -->
    <div class="col-lg-6">
        <!-- 최근 프로젝트 -->
        <div class="card shadow mb-4">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary">최근 프로젝트</h6>
                <a href="{{ url_for('projects.index') }}" class="btn btn-sm btn-primary">모든 프로젝트</a>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>프로젝트명</th>
                                <th>상태</th>
                                <th>기간</th>
                                <th>진행률</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>서해안 중계소 정밀점검</td>
                                <td><span class="badge bg-success">진행중</span></td>
                                <td>2023-01-15 ~ 2023-03-30</td>
                                <td>
                                    <div class="progress" style="height: 5px;">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 65%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>동해 안전국 장비 교체</td>
                                <td><span class="badge bg-warning">계획중</span></td>
                                <td>2023-04-01 ~ 2023-05-15</td>
                                <td>
                                    <div class="progress" style="height: 5px;">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 10%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>본부 통신장비 업그레이드</td>
                                <td><span class="badge bg-primary">진행중</span></td>
                                <td>2023-02-10 ~ 2023-04-10</td>
                                <td>
                                    <div class="progress" style="height: 5px;">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: 40%"></div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 오른쪽 섹션 -->
    <div class="col-lg-6">
        <!-- 다가오는 일정 -->
        <div class="card shadow mb-4">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary">다가오는 일정</h6>
                <a href="#" class="btn btn-sm btn-primary">모든 일정</a>
            </div>
            <div class="card-body">
                <div class="list-group list-group-flush">
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1">서해 중계소 정기 점검</h6>
                            <small class="text-muted">2023-03-15</small>
                        </div>
                        <p class="mb-1">서해권역 중계소 송/수신기 정기 점검 및 성능 테스트</p>
                        <small class="text-muted">담당: 홍길동</small>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1">안전국 네트워크 장비 교체</h6>
                            <small class="text-muted">2023-03-20</small>
                        </div>
                        <p class="mb-1">남해권역 안전국 방화벽 및 스위치 교체 작업</p>
                        <small class="text-muted">담당: 김철수</small>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1">안테나 점검 및 정비</h6>
                            <small class="text-muted">2023-03-25</small>
                        </div>
                        <p class="mb-1">동해권역 안전국 안테나 점검 및 예방 정비</p>
                        <small class="text-muted">담당: 박영희</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- 빠른 링크 -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">빠른 링크</h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <a href="{{ url_for('projects.create') }}" class="btn btn-outline-primary w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-plus-circle fa-2x mb-2"></i>
                            <span>프로젝트 등록</span>
                        </a>
                    </div>
                    <div class="col-md-4 mb-3">
                        <a href="{{ url_for('equipment.group_list') }}" class="btn btn-outline-success w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-tools fa-2x mb-2"></i>
                            <span>장비 관리</span>
                        </a>
                    </div>
                    <div class="col-md-4 mb-3">
                        <a href="{{ url_for('locations.index') }}" class="btn btn-outline-info w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-map-marker-alt fa-2x mb-2"></i>
                            <span>장소 관리</span>
                        </a>
                    </div>
                    <div class="col-md-4 mb-3">
                        <a href="{{ url_for('companies.index') }}" class="btn btn-outline-warning w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-building fa-2x mb-2"></i>
                            <span>거래처 관리</span>
                        </a>
                    </div>
                    <div class="col-md-4 mb-3">
                        <a href="#" class="btn btn-outline-danger w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-file-alt fa-2x mb-2"></i>
                            <span>작업일지</span>
                        </a>
                    </div>
                    <div class="col-md-4 mb-3">
                        <a href="#" class="btn btn-outline-secondary w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-chart-line fa-2x mb-2"></i>
                            <span>통계 보기</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% else %}
<!-- 로그인되지 않은 상태의 랜딩 페이지 -->
<div class="text-center my-5">
    <h1 class="display-4 fw-bold mb-4">GFEM</h1>
    <p class="lead mb-5">GMT 필드 엔지니어 관리 시스템에 오신 것을 환영합니다.</p>
    <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
        <a href="{{ url_for('auth.login') }}" class="btn btn-primary btn-lg px-4 gap-3">로그인</a>
    </div>
</div>

<div class="row mt-5">
    <div class="col-md-4">
        <div class="card shadow h-100">
            <div class="card-body text-center">
                <i class="fas fa-project-diagram fa-4x mb-3 text-primary"></i>
                <h3 class="card-title h5">프로젝트 관리</h3>
                <p class="card-text">프로젝트 생성, 추적 및 관리를 통합적으로 수행합니다.</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card shadow h-100">
            <div class="card-body text-center">
                <i class="fas fa-tools fa-4x mb-3 text-success"></i>
                <h3 class="card-title h5">장비 관리</h3>
                <p class="card-text">현장 장비의 상태를 추적하고 효율적으로 관리합니다.</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card shadow h-100">
            <div class="card-body text-center">
                <i class="fas fa-file-alt fa-4x mb-3 text-danger"></i>
                <h3 class="card-title h5">작업일지</h3>
                <p class="card-text">현장 작업을 기록하고 보고서를 생성합니다.</p>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}